<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GK Course Project: src/Source_files/i2c.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GK Course Project
   </div>
   <div id="projectbrief">DDL Final Project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('i2c_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">i2c.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains all the i2c functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;em_i2c.h&quot;</code><br />
<code>#include &quot;em_cmu.h&quot;</code><br />
<code>#include &quot;em_assert.h&quot;</code><br />
<code>#include &quot;i2c.h&quot;</code><br />
<code>#include &quot;sleep_routines.h&quot;</code><br />
<code>#include &quot;scheduler.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afbb9049f3acba49790d1dd366a1448c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#afbb9049f3acba49790d1dd366a1448c3">i2c_open</a> (I2C_TypeDef *i2c, <a class="el" href="struct_i2_c___o_p_e_n___s_t_r_u_c_t.html">I2C_OPEN_STRUCT</a> *i2c_open, <a class="el" href="struct_i2_c___i_o___s_t_r_u_c_t.html">I2C_IO_STRUCT</a> *i2c_io)</td></tr>
<tr class="memdesc:afbb9049f3acba49790d1dd366a1448c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to open an i2c bus.  <a href="i2c_8c.html#afbb9049f3acba49790d1dd366a1448c3">More...</a><br /></td></tr>
<tr class="separator:afbb9049f3acba49790d1dd366a1448c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9691811ca01a2441dc469d4b658b858b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a9691811ca01a2441dc469d4b658b858b">i2c_bus_reset</a> (I2C_TypeDef *i2c, <a class="el" href="struct_i2_c___i_o___s_t_r_u_c_t.html">I2C_IO_STRUCT</a> *i2c_io)</td></tr>
<tr class="memdesc:a9691811ca01a2441dc469d4b658b858b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to reset the I2C state machines.  <a href="i2c_8c.html#a9691811ca01a2441dc469d4b658b858b">More...</a><br /></td></tr>
<tr class="separator:a9691811ca01a2441dc469d4b658b858b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e817e99d2a59e5f48e4ff0c79e7eef5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a8e817e99d2a59e5f48e4ff0c79e7eef5">I2C0_IRQHandler</a> (void)</td></tr>
<tr class="memdesc:a8e817e99d2a59e5f48e4ff0c79e7eef5"><td class="mdescLeft">&#160;</td><td class="mdescRight">IRQ handler for I2C0.  <a href="i2c_8c.html#a8e817e99d2a59e5f48e4ff0c79e7eef5">More...</a><br /></td></tr>
<tr class="separator:a8e817e99d2a59e5f48e4ff0c79e7eef5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac45e5675f6f4e6e1dee2273baf245219"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#ac45e5675f6f4e6e1dee2273baf245219">I2C1_IRQHandler</a> (void)</td></tr>
<tr class="memdesc:ac45e5675f6f4e6e1dee2273baf245219"><td class="mdescLeft">&#160;</td><td class="mdescRight">IRQ handler for I2C1.  <a href="i2c_8c.html#ac45e5675f6f4e6e1dee2273baf245219">More...</a><br /></td></tr>
<tr class="separator:ac45e5675f6f4e6e1dee2273baf245219"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35fbfb8375e460fbf88dab45c6f27f7b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a35fbfb8375e460fbf88dab45c6f27f7b">i2c_start</a> (I2C_TypeDef *i2c, <a class="el" href="struct_i2_c___s_t_a_r_t___s_t_r_u_c_t.html">I2C_START_STRUCT</a> *start_struct)</td></tr>
<tr class="memdesc:a35fbfb8375e460fbf88dab45c6f27f7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to start an I2C read or write operation.  <a href="i2c_8c.html#a35fbfb8375e460fbf88dab45c6f27f7b">More...</a><br /></td></tr>
<tr class="separator:a35fbfb8375e460fbf88dab45c6f27f7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c8d87c63fb7209a552d6b46c9e68d41"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a8c8d87c63fb7209a552d6b46c9e68d41">i2c_idle</a> (void)</td></tr>
<tr class="memdesc:a8c8d87c63fb7209a552d6b46c9e68d41"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2C Idle indicates whether the I2C state machine is in the IDLE state.  <a href="i2c_8c.html#a8c8d87c63fb7209a552d6b46c9e68d41">More...</a><br /></td></tr>
<tr class="separator:a8c8d87c63fb7209a552d6b46c9e68d41"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains all the i2c functions. </p>
<dl class="section author"><dt>Author</dt><dd>Giselle Koo </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Feb 20, 2020 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a8e817e99d2a59e5f48e4ff0c79e7eef5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e817e99d2a59e5f48e4ff0c79e7eef5">&#9670;&nbsp;</a></span>I2C0_IRQHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2C0_IRQHandler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IRQ handler for I2C0. </p>
<p>This is an IRQ handler for I2C0.</p>
<dl class="section note"><dt>Note</dt><dd>This is currently configured to handle the interrupts for ACK, NACK, RXDATAV, and MSTOP. Interrupts are enabled in the i2c_open function. </dd></dl>

</div>
</div>
<a id="ac45e5675f6f4e6e1dee2273baf245219"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac45e5675f6f4e6e1dee2273baf245219">&#9670;&nbsp;</a></span>I2C1_IRQHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2C1_IRQHandler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IRQ handler for I2C1. </p>
<p>This is an IRQ handler for I2C1.</p>
<dl class="section note"><dt>Note</dt><dd>This is currently configured to handle the interrupts for ACK, NACK, RXDATAV, and MSTOP. Interrupts are enabled in the i2c_open function. </dd></dl>

</div>
</div>
<a id="a9691811ca01a2441dc469d4b658b858b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9691811ca01a2441dc469d4b658b858b">&#9670;&nbsp;</a></span>i2c_bus_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_bus_reset </td>
          <td>(</td>
          <td class="paramtype">I2C_TypeDef *&#160;</td>
          <td class="paramname"><em>i2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i2_c___i_o___s_t_r_u_c_t.html">I2C_IO_STRUCT</a> *&#160;</td>
          <td class="paramname"><em>i2c_io</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to reset the I2C state machines. </p>
<p>This function resets the state machines of both the Pearl Gecko and external I2C devices connected to the bus.</p>
<dl class="section note"><dt>Note</dt><dd>This function resets the peripheral I2C devices by NACKing 9 times by manually clocking the SCK pin while leaving SDA in its default asserted state.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">i2c</td><td>Pointer to the base peripheral address of the I2C peripheral being used. The Pearl Gecko has 2 I2C peripherals.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">i2c_io</td><td>The struct which specifies port and pin routing information for the I2C bus. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8c8d87c63fb7209a552d6b46c9e68d41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c8d87c63fb7209a552d6b46c9e68d41">&#9670;&nbsp;</a></span>i2c_idle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool i2c_idle </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>I2C Idle indicates whether the I2C state machine is in the IDLE state. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns TRUE if the state machine is IDLE and the i2c peripheral is IDLE, and FALSE if the state machine is busy (ie. any state other than IDLE) or the i2c peripheral is not idle. </dd></dl>

</div>
</div>
<a id="afbb9049f3acba49790d1dd366a1448c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbb9049f3acba49790d1dd366a1448c3">&#9670;&nbsp;</a></span>i2c_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_open </td>
          <td>(</td>
          <td class="paramtype">I2C_TypeDef *&#160;</td>
          <td class="paramname"><em>i2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i2_c___o_p_e_n___s_t_r_u_c_t.html">I2C_OPEN_STRUCT</a> *&#160;</td>
          <td class="paramname"><em>i2c_open</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i2_c___i_o___s_t_r_u_c_t.html">I2C_IO_STRUCT</a> *&#160;</td>
          <td class="paramname"><em>i2c_io</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to open an i2c bus. </p>
<p>This routine initializes an i2c bus and sets its state to IDLE.</p>
<dl class="section note"><dt>Note</dt><dd>This function enables the interrupt flags ACK, NACK, RXDATATV and MSTOP.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">i2c</td><td>Pointer to the base peripheral address of the I2C peripheral being used. The Pearl Gecko has 2 I2C peripherals.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">i2c_open</td><td>The struct that this routine will use to configure the I2C bus.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">i2c_io</td><td>The struct which specifies port and pin routing information for the I2C bus. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a35fbfb8375e460fbf88dab45c6f27f7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35fbfb8375e460fbf88dab45c6f27f7b">&#9670;&nbsp;</a></span>i2c_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_start </td>
          <td>(</td>
          <td class="paramtype">I2C_TypeDef *&#160;</td>
          <td class="paramname"><em>i2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i2_c___s_t_a_r_t___s_t_r_u_c_t.html">I2C_START_STRUCT</a> *&#160;</td>
          <td class="paramname"><em>start_struct</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to start an I2C read or write operation. </p>
<p>Initializes the I2C payload which stores the state of the I2C operation. All information required by the I2C state machine interacts with this I2C payload struct.</p>
<p>Once the payload is initialized, this function initiates the I2C operation by entering the first state of the state machine</p>
<dl class="section note"><dt>Note</dt><dd>This function must only be called if the state of the I2C peripheral and the state of the I2C state machine are both in the idle state.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">i2c</td><td>Pointer to the base peripheral address of the I2C peripheral being used. The Pearl Gecko has 2 I2C peripherals.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">start_struct</td><td>Pointer to the i2c start struct which contains all parameters required to configure the i2c payload for a read or write sequence. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_bd28dbe89bcf80b4a95b15dbc841344d.html">Source_files</a></li><li class="navelem"><a class="el" href="i2c_8c.html">i2c.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
